{"dependencies":[{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":40,"index":40}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.addMemoryWarningListener = addMemoryWarningListener;\n  var _reactNative = require(_dependencyMap[0], \"react-native\");\n  function addMemoryWarningListener(mmkv) {\n    if (global.WeakRef != null && global.FinalizationRegistry != null) {\n      // 1. Weakify MMKV so we can safely use it inside the memoryWarning event listener\n      var weakMmkv = new WeakRef(mmkv);\n      var listener = _reactNative.AppState.addEventListener('memoryWarning', () => {\n        // 0. Everytime we receive a memoryWarning, we try to trim the MMKV instance (if it is still valid)\n        weakMmkv.deref()?.trim();\n      });\n      // 2. Add a listener to when the MMKV instance is deleted\n      var finalization = new FinalizationRegistry(l => {\n        // 3. When MMKV is deleted, this listener will be called with the memoryWarning listener.\n        l.remove();\n      });\n      // 2.1. Bind the listener to the actual MMKV instance.\n      finalization.register(mmkv, listener);\n    } else {\n      // WeakRef/FinalizationRegistry is not implemented in this engine.\n      // Just add the listener, even if it retains MMKV strong forever.\n      _reactNative.AppState.addEventListener('memoryWarning', () => {\n        mmkv.trim();\n      });\n    }\n  }\n});","lineCount":30,"map":[[6,2,1,0],[6,6,1,0,"_reactNative"],[6,18,1,0],[6,21,1,0,"require"],[6,28,1,0],[6,29,1,0,"_dependencyMap"],[6,43,1,0],[7,2,5,7],[7,11,5,16,"addMemoryWarningListener"],[7,35,5,40,"addMemoryWarningListener"],[7,36,5,41,"mmkv"],[7,40,5,60],[7,42,5,68],[8,4,6,2],[8,8,6,6,"global"],[8,14,6,12],[8,15,6,13,"WeakRef"],[8,22,6,20],[8,26,6,24],[8,30,6,28],[8,34,6,32,"global"],[8,40,6,38],[8,41,6,39,"FinalizationRegistry"],[8,61,6,59],[8,65,6,63],[8,69,6,67],[8,71,6,69],[9,6,7,4],[10,6,8,4],[10,10,8,10,"weakMmkv"],[10,18,8,18],[10,21,8,21],[10,25,8,25,"WeakRef"],[10,32,8,32],[10,33,8,33,"mmkv"],[10,37,8,37],[10,38,8,38],[11,6,9,4],[11,10,9,10,"listener"],[11,18,9,18],[11,21,9,21,"AppState"],[11,42,9,29],[11,43,9,30,"addEventListener"],[11,59,9,46],[11,60,9,47],[11,75,9,62],[11,77,9,64],[11,83,9,70],[12,8,10,6],[13,8,11,6,"weakMmkv"],[13,16,11,14],[13,17,11,15,"deref"],[13,22,11,20],[13,23,11,21],[13,24,11,22],[13,26,11,24,"trim"],[13,30,11,28],[13,31,11,29],[13,32,11,30],[14,6,12,4],[14,7,12,5],[14,8,12,6],[15,6,13,4],[16,6,14,4],[16,10,14,10,"finalization"],[16,22,14,22],[16,25,14,25],[16,29,14,29,"FinalizationRegistry"],[16,49,14,49],[16,50,15,7,"l"],[16,51,15,33],[16,55,15,38],[17,8,16,8],[18,8,17,8,"l"],[18,9,17,9],[18,10,17,10,"remove"],[18,16,17,16],[18,17,17,17],[18,18,17,18],[19,6,18,6],[19,7,19,4],[19,8,19,5],[20,6,20,4],[21,6,21,4,"finalization"],[21,18,21,16],[21,19,21,17,"register"],[21,27,21,25],[21,28,21,26,"mmkv"],[21,32,21,30],[21,34,21,32,"listener"],[21,42,21,40],[21,43,21,41],[22,4,22,2],[22,5,22,3],[22,11,22,9],[23,6,23,4],[24,6,24,4],[25,6,25,4,"AppState"],[25,27,25,12],[25,28,25,13,"addEventListener"],[25,44,25,29],[25,45,25,30],[25,60,25,45],[25,62,25,47],[25,68,25,53],[26,8,26,6,"mmkv"],[26,12,26,10],[26,13,26,11,"trim"],[26,17,26,15],[26,18,26,16],[26,19,26,17],[27,6,27,4],[27,7,27,5],[27,8,27,6],[28,4,28,2],[29,2,29,0],[30,0,29,1],[30,3]],"functionMap":{"names":["<global>","addMemoryWarningListener","AppState.addEventListener$argument_1","FinalizationRegistry$argument_0"],"mappings":"AAA;OCI;gECI;KDG;MEG;OFG;+CCO;KDE;CDE"}},"type":"js/module"}]}